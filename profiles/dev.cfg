[buildout]
extends =
    base.cfg

find-links +=
    http://infrae.com/download/simple/

parts +=
    translation
    podiff
    checkversions

eggs +=
    Products.enablesettrace
    ipython
    ipdb
#    pdbpp
# pdbpp threw: AttributeError: UnixConsole instance has no attribute 'old_sigwinch'?

auto-checkout +=
    recensio.policy
    recensio.theme
    recensio.translations
    recensio.contenttypes
    recensio.imports

[translation]
recipe = infrae.i18nextract
packages =
    recensio.contenttypes
    recensio.policy
    recensio.theme
output = ${buildout:directory}/src/recensio.translations/recensio/translations/locales/templates/LC_MESSAGES/
output-package = recensio.translations
domain = recensio
# This adds two scripts to manage translation strings, we only need to
# use translation-extract. See https://syslab.com/proj/documents/53
# for details on how to update translations
#
#  1. translation-extract
# This extracts msgids from the packages configured above and adds them to
# recensio.pot in the output directory. Beware, new msgids should not
# be added to the pot file manually, as they will be clobbered
#
#  2. translation-manage -m # OBSOLETE
#  use http://translations.syslab.com to merge
#
# BEWARE: infrae.i18nextract skips the locales/en folder (hardcoded)
# You need to run the step below manually for en
#
# User of Mac OS might run into this problem:
# http://subcommanderblog.wordpress.com/2009/05/16/msgmerge-on-macosx-and-no-such-file-or-directory/
# They need to run msgmerge manually and pass the additional parameter --backup=off
# Example
# ~/recensio.translations/recensio/translations/locales$ msgmerge -U --backup=off de/LC_MESSAGES/recensio.po recensio.pot

[podiff]
recipe = zc.recipe.egg:scripts
eggs = recensio.translations[podiff]
arguments = '${sources:recensio.translations}'

[checkversions]
recipe = zc.recipe.egg:scripts
eggs = z3c.checkversions [buildout]

[zeo]
recipe = plone.recipe.zeoserver
blob-storage = ${buildout:directory}/var/blobstorage
zeo-address = 8100
pack-days = 10

[instance]
<= instance-settings
shared-blob = on
debug-mode = on
verbose-security = on
zcml-additional = ""
zserver-threads = 1
