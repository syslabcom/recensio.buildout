[buildout]
extends =
    config/base.cfg
    config/solr.cfg
    custom.cfg
parts +=
    solr
    test
    omelette

extensions = mr.developer
auto-checkout =
    recensio.plone
    recensio.altertum
    recensio.regio
    guess-language
    collective.solr

[sources]
recensio.plone    = git https://github.com/syslabcom/recensio.plone.git    pushurl=git@github.com:syslabcom/recensio.plone.git    branch=solr
recensio.altertum = git https://github.com/syslabcom/recensio.altertum.git pushurl=git@github.com:syslabcom/recensio.altertum.git branch=main
recensio.regio    = git https://github.com/syslabcom/recensio.regio.git    pushurl=git@github.com:syslabcom/recensio.regio.git    branch=main
guess-language    = git https://github.com/syslabcom/guess-language.git    pushurl=git@github.com:syslabcom/guess-language.git    branch=main
collective.solr   = git https://github.com/collective/collective.solr.git  pushurl=git@github.com:collective/collective.solr.git  branch=plone6-classicui-facets

[instance]
zope-conf-additional =

[supervisor]
=> scripts
programs =
    10 zeo ${zeo:location}/bin/runzeo ${zeo:location}
    20 solr ${buildout:directory}/solr/bin/solr [-f --user-managed] ${buildout:directory}/solr

[testenv]
zope_i18n_compile_mo_files = 1

[test]
recipe = zc.recipe.testrunner
defaults = ['-s', 'recensio.plone', '--auto-color', '--auto-progress']
eggs =
    recensio.plone[test]
environment = testenv

[omelette]
recipe = collective.recipe.omelette
eggs = ${instance:eggs}
ignores =
    bcrypt
    cffi
    cryptography
